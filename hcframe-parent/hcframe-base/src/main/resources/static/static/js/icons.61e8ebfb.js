(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["icons"],{"0249":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container",style:{backgroundColor:e.loginBackgroundColor}},[a("el-form",{ref:"initData",staticClass:"init-form",attrs:{model:e.datasourceForm,rules:e.rules,autocomplete:"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[e._v(" 数据初始化 ")])]),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" 名称： ")])]),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"sysDescription"}},[a("el-input",{ref:"sysDescription",attrs:{placeholder:"名称/描述",name:"sysDescription",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.datasourceForm.sysDescription,callback:function(t){e.$set(e.datasourceForm,"sysDescription",t)},expression:"datasourceForm.sysDescription"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"名称/描述",width:"300",trigger:"hover",content:"使用者自己定义的名称，用于标识数据库作用等，可包含中文"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" KEY： ")])]),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"commonAlias"}},[a("el-input",{ref:"commonAlias",attrs:{placeholder:"KEY",name:"commonAlias",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.datasourceForm.commonAlias,callback:function(t){e.$set(e.datasourceForm,"commonAlias",t)},expression:"datasourceForm.commonAlias"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"KEY",width:"300",trigger:"hover",content:"用于系统识别的代表数据库的唯一key，不可包含空格，不可包含中文"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" 类型： ")])]),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"commonType"}},[a("el-select",{staticClass:"el-input",attrs:{name:"commonType",placeholder:"请选择数据库类型",autocomplete:"on"},model:{value:e.datasourceForm.commonType,callback:function(t){e.$set(e.datasourceForm,"commonType",t)},expression:"datasourceForm.commonType"}},e._l(e.datasourceType,(function(e){return a("el-option",{key:e.typeKey,attrs:{label:e.typeKey,value:e.typeKey}})})),1)],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"数据库类型",width:"300",trigger:"hover",content:"选择数据库类型，如Mysql,Oracle等"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" URL： ")])]),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"url"}},[a("el-input",{ref:"url",attrs:{placeholder:"URL",name:"url",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.datasourceForm.url,callback:function(t){e.$set(e.datasourceForm,"url",t)},expression:"datasourceForm.url"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"URL",width:"300",trigger:"hover",content:"用于设置数据库的url，与之前yml文件格式保持一致即可"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" 用户名： ")])]),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"username"}},[a("el-input",{ref:"username",attrs:{placeholder:"用户名",name:"username",type:"text",tabindex:"1",autocomplete:"on"},model:{value:e.datasourceForm.username,callback:function(t){e.$set(e.datasourceForm,"username",t)},expression:"datasourceForm.username"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"用户名",width:"300",trigger:"hover",content:"数据库用户名"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" 密码： ")])]),a("el-col",{attrs:{span:18}},[a("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"密码",name:"password",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.datasourceForm.password,callback:function(t){e.$set(e.datasourceForm,"password",t)},expression:"datasourceForm.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("svg-icon",{attrs:{name:"password"===e.passwordType?"eye-off":"eye-on"}})],1)],1)],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"密码",width:"300",trigger:"hover",content:"数据库密码"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"},[e._v(" 库名： ")])]),a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{prop:"schemaName"}},[a("el-input",{ref:"schemaName",attrs:{placeholder:"库名",name:"schemaName",type:"text",tabindex:"1",autocomplete:"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleCommit(1)}},model:{value:e.datasourceForm.schemaName,callback:function(t){e.$set(e.datasourceForm,"schemaName",t)},expression:"datasourceForm.schemaName"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"数据库名",width:"300",trigger:"hover",content:"Mysql中为databases中的名称，达梦为模式名，Oracle为创建的用户名"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("div",{staticStyle:{width:"80%",margin:"20px auto"}},[a("el-button",{staticStyle:{width:"100%",display:"block","margin-bottom":"30px"},attrs:{loading:e.testLoading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handleTest(t)}}},[e._v(" 测试连接 ")]),a("el-button",{staticStyle:{width:"100%",display:"block","margin-bottom":"30px","margin-left":"0 !important"},attrs:{loading:e.loading,type:"primary",disabled:e.disabled},nativeOn:{click:function(t){return t.preventDefault(),e.handleCommit(1)}}},[e._v(" 保存连接 ")])],1)],1),a("el-dialog",{attrs:{title:e.$t("login.thirdparty"),visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[e._v(" "+e._s(e.$t("login.thirdpartyTips"))+" "),a("br"),a("br"),a("br"),a("social-sign")],1)],1)},n=[],o=(a("99af"),a("a15b"),a("fb6a"),a("d3b7"),a("25f0"),a("d4ec")),s=a("bee2"),i=a("262e"),c=a("2caf"),l=a("9ab4"),p=a("60a3"),u=a("7383"),d=a("a1de"),m=a.n(d),f=a("2fe1"),g=a("6e7f"),y=a("f305"),h=a("cc5a"),v=function(e){Object(i["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(s["a"])(a,[{key:"mounted",value:function(){h["a"].isEmpty(y["a"].sourceToken)&&this.$router.push({path:"/dataLogin"}),this.checkDatasource(),this.getTypeList()}},{key:"checkDatasource",value:function(){}},{key:"loginBackgroundColor",get:function(){if(u["a"].sidebarBgTheme){var e=function(e,t){var a=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return 0===t?[a,r,n].join(","):(a+=Math.round(t*(255-a)),r+=Math.round(t*(255-r)),n+=Math.round(t*(255-n)),"#".concat(a.toString(16)).concat(r.toString(16)).concat(n.toString(16)))};return e(u["a"].theme,.2)}return m.a.loginBg}}]),a}(Object(f["c"])(g["a"]));v=Object(l["a"])([Object(p["a"])({name:"datasourceInit",components:{}})],v);var b=v,w=b,k=(a("201c"),a("251e"),a("2877")),x=Object(k["a"])(w,r,n,!1,null,"773e9fea",null);t["default"]=x.exports},"201c":function(e,t,a){"use strict";var r=a("f4b4"),n=a.n(r);n.a},"24bc":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-container",style:{backgroundColor:e.loginBackgroundColor}},[a("el-form",{ref:"initData",staticClass:"init-form",attrs:{model:e.datasourceForm,rules:e.rulezzz,autocomplete:"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[e._v(" 请输入数据源Token ")])]),a("el-row",[a("el-col",{attrs:{span:3}},[a("span",{staticClass:"init-container"})]),a("el-col",{attrs:{span:18}},[a("el-tooltip",{attrs:{content:"Caps lock is On",placement:"right",manual:""},model:{value:e.capsTooltip,callback:function(t){e.capsTooltip=t},expression:"capsTooltip"}},[a("el-form-item",{attrs:{prop:"Token"}},[a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Token",name:"Token",tabindex:"2",autocomplete:"on"},on:{blur:function(t){e.capsTooltip=!1}},nativeOn:{keyup:function(t){return e.checkCapslock(t)}},model:{value:e.datasourceForm.Token,callback:function(t){e.$set(e.datasourceForm,"Token",t)},expression:"datasourceForm.Token"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("svg-icon",{attrs:{name:"password"===e.passwordType?"eye-off":"eye-on"}})],1)],1)],1)],1),a("el-col",{attrs:{span:2}},[a("el-popover",{staticStyle:{"margin-left":"10px","margin-top":"20px"},attrs:{placement:"top-start",title:"TOKEN",width:"300",trigger:"hover",content:"此Token可从后台启动日志中获取"}},[a("i",{staticClass:"el-icon-info icon-style",attrs:{slot:"reference"},slot:"reference"})])],1)],1),a("div",{staticStyle:{width:"80%",margin:"20px auto"}},[a("el-button",{staticStyle:{width:"100%",display:"block","margin-bottom":"30px"},attrs:{loading:e.testLoading,type:"primary"},on:{click:e.datasourceLogin}},[e._v(" 登陆 ")])],1)],1),a("el-dialog",{attrs:{title:e.$t("login.thirdparty"),visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t}}},[e._v(" "+e._s(e.$t("login.thirdpartyTips"))+" "),a("br"),a("br"),a("br"),a("social-sign")],1)],1)},n=[],o=(a("99af"),a("a15b"),a("fb6a"),a("d3b7"),a("25f0"),a("96cf"),a("1da1")),s=a("d4ec"),i=a("bee2"),c=a("262e"),l=a("2caf"),p=a("9ab4"),u=a("60a3"),d=a("7383"),m=a("a1de"),f=a.n(m),g=a("2fe1"),y=a("6e7f"),h=a("f305"),v=function(e){Object(c["a"])(a,e);var t=Object(l["a"])(a);function a(){var e;return Object(s["a"])(this,a),e=t.apply(this,arguments),e.rulezzz={Token:[{required:!0,message:"请填写Token",trigger:"change"}]},e}return Object(i["a"])(a,[{key:"mounted",value:function(){}},{key:"datasourceLogin",value:function(){var e=this;this.$refs.initData.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a&&h["a"].login(e.datasourceForm.Token);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"loginBackgroundColor",get:function(){if(d["a"].sidebarBgTheme){var e=function(e,t){var a=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),n=parseInt(e.slice(5,7),16);return 0===t?[a,r,n].join(","):(a+=Math.round(t*(255-a)),r+=Math.round(t*(255-r)),n+=Math.round(t*(255-n)),"#".concat(a.toString(16)).concat(r.toString(16)).concat(n.toString(16)))};return e(d["a"].theme,.2)}return f.a.loginBg}}]),a}(Object(g["c"])(y["a"]));v=Object(p["a"])([Object(u["a"])({name:"datasourceLogin",components:{}})],v);var b=v,w=b,k=(a("5e7c"),a("fc21"),a("2877")),x=Object(k["a"])(w,r,n,!1,null,"704a44b2",null);t["default"]=x.exports},"251e":function(e,t,a){"use strict";var r=a("bdd3"),n=a.n(r);n.a},5122:function(e,t,a){},"5e7c":function(e,t,a){"use strict";var r=a("a77b"),n=a.n(r);n.a},"6e7f":function(e,t,a){"use strict";var r=a("b85c"),n=(a("96cf"),a("1da1")),o=a("d4ec"),s=a("bee2"),i=a("262e"),c=a("2caf"),l=a("9ab4"),p=a("60a3"),u=a("cc5a"),d=a("455a"),m=a("c873"),f=function(e){Object(i["a"])(a,e);var t=Object(c["a"])(a);function a(){return Object(o["a"])(this,a),t.apply(this,arguments)}return Object(s["a"])(a,[{key:"getAll",value:function(e){return this.axios.get("/datatype/all",e)}}]),a}(m["a"]),g=f,y=a("5c96"),h=function(e){Object(i["a"])(a,e);var t=Object(c["a"])(a);function a(){var e;return Object(o["a"])(this,a),e=t.apply(this,arguments),e.datasourceType=[],e.datasourceApi=new d["a"],e.dataTypeApi=new g,e.passwordType="password",e.capsTooltip=!1,e.loading=!1,e.showDialog=!1,e.testLoading=!1,e.disabled=!0,e.datasourceForm={},e.validateName=function(t,a,r){u["a"].isEmpty(a)&&r(new Error("数据库名称不能为空！")),e.datasourceApi.unique({name:a}).then((function(e){0===e.data.code?r():r(new Error(e.data.msg))}))},e.validateKey=function(t,a,r){u["a"].isEmpty(a)&&r(new Error("数据库KEY不能为空！")),e.datasourceApi.unique({key:a}).then((function(e){0===e.data.code?r():r(new Error(e.data.msg))}))},e.rules={commonAlias:[{required:!0,message:"请填写KEY",trigger:"change"},{validator:e.validateKey,trigger:"blur"},{pattern:/^[A-Za-z_][A-Za-z0-9_]*$/,message:"以_和字母开头，不支持中文和特殊字符"}],sysDescription:[{required:!0,message:"请填写数据库名称",trigger:"change"},{validator:e.validateName,trigger:"blur"}],commonType:[{required:!0,message:"请选择数据库类型",trigger:"change"}],url:[{required:!0,message:"请填写数据库url",trigger:"change"}],password:[{required:!0,message:"请填写数据库密码",trigger:"change"}],username:[{required:!0,message:"请填写数据库账号",trigger:"change"}],schemaName:[{required:!0,message:"请填写Schema名称",trigger:"change"}]},e}return Object(s["a"])(a,[{key:"getTypeList",value:function(){var e=this;this.dataTypeApi.getAll("").then((function(t){0===t.data.code&&(e.datasourceType=t.data.data)}))}},{key:"handleTest",value:function(){var e=this;this.testLoading=!0,this.$refs.initData.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(a){var n,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}n=Object(r["a"])(e.datasourceType);try{for(n.s();!(o=n.n()).done;)s=o.value,e.datasourceForm.commonType===s.typeKey&&(e.datasourceForm.driverClassName=s.driver)}catch(i){n.e(i)}finally{n.f()}return e.datasourceForm.sysEnabled=1,e.datasourceForm.isDefault=1,t.next=7,e.testDatasource(e.datasourceForm);case 7:e.testLoading=!1;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"testDatasource",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.datasourceApi.test(t);case 2:return a=e.sent,r=a.data,0===r.code?(Object(y["Message"])({message:"数据库连接成功",type:"success",duration:5e3}),this.disabled=!1):Object(y["Message"])({message:r.msg||"Error",type:"warning",duration:5e3}),e.abrupt("return",r.code);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleCommit",value:function(e){var t=this;this.$refs.initData.validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=10;break}return a.next=3,t.add(t.datasourceForm,e);case 3:if(n=a.sent,0!==n.code){a.next=9;break}return a.next=7,t.$router.push({path:"/login"});case 7:a.next=10;break;case 9:Object(y["Message"])({message:n.msg||"Error",type:"warning",duration:5e3});case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},{key:"add",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var n,o,s,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=Object(r["a"])(this.datasourceType);try{for(n.s();!(o=n.n()).done;)s=o.value,t.commonType===s.typeKey&&(t.driverClassName=s.driver)}catch(l){n.e(l)}finally{n.f()}return t.sysEnabled=1,t.isDefault=a,e.next=6,this.datasourceApi.addInfo(t);case 6:return i=e.sent,c=i.data,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"checkCapslock",value:function(e){var t=e.key;this.capsTooltip=null!==t&&1===t.length&&t>="A"&&t<="Z"}},{key:"showPwd",value:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))}}]),a}(p["d"]);h=Object(l["a"])([Object(p["a"])({name:"Datasource"})],h);t["a"]=h},a77b:function(e,t,a){},bdd3:function(e,t,a){},f4b4:function(e,t,a){},fc21:function(e,t,a){"use strict";var r=a("5122"),n=a.n(r);n.a}}]);